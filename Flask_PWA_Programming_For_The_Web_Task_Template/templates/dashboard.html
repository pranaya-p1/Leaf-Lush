{% extends 'layout.html' %}
{% block content %}

<section class="dashboard">

  <!-- Thin glowing border around everything -->
  <div class="dashboard-container">

    <!-- Welcome Section -->
    <div class="welcome-box">
      <h2>Welcome {{ username }}!</h2>
      <button class="btn upload-btn">Upload Latest Photo</button>
    </div>

    <!-- Profile Summary -->
    <div class="profile-summary">
      <div class="photo-area">
        <img src="{{ profile_pic }}" alt="User plant" class="profile-plant">
        <button class="btn edit-btn">Edit Plant</button>
      </div>
      <div class="profile-info">
        <h3>Stats:</h3>
        <p><strong>Day:</strong> 0</p>
        <p><strong>Bio:</strong> Add a bio about your first plant!</p>
        <p><strong>Fun Fact:</strong> Your garden is waiting to grow ðŸŒ±</p>
        <a href="{{ url_for('update_profile', username=username) }}" class="btn">Update Profile</a>
      </div>
    </div>

    <!-- Your Plants -->
    <div class="plants-section">
      <h3>View your other plants:</h3>
      <div class="plant-gallery">
        <div class="add-plant-btn">+</div>
      </div>
    </div>

    <!-- Follow Recommendations -->
    <div class="follow-section">
      <h3>Follow Recommendations:</h3>
      <div class="follow-profiles">
        {% for user in recommended_users %}
        <div class="profile-card">
          <img src="{{ user.image }}" alt="{{ user.name }}">
          <h4>{{ user.name }}</h4>
          <p>{{ user.username }}</p>
          <button class="btn">Follow</button>
        </div>
        {% endfor %}
      </div>
    </div>

    <!-- Posts -->
    <div class="posts-section">
      <h3>Your Posts:</h3>
      <div class="empty-posts">
        <p>No posts yet â€” start sharing your garden!</p>
        <button class="btn">+</button>
      </div>
    </div>

  </div>
</section>

<!-- Popup for username/profile picture setup -->
<div id="setup-popup" class="popup-overlay" style="display: none;">
  <div class="popup-content">
    <h2>Welcome to Leaf & Lush!</h2>
    <p>Create your display name and upload a profile picture ðŸŒ¿</p>
    <form action="{{ url_for('save_profile') }}" method="POST" enctype="multipart/form-data">
      <input type="text" name="username" placeholder="Enter a username" required>
      <input type="file" name="profile_pic" accept="image/*" required>
      <button type="submit" class="btn">Save</button>
    </form>
  </div>
</div>

{% if show_popup %}
<script>
  document.getElementById("setup-popup").style.display = "flex";
</script>
{% endif %}

{% endblock %}
